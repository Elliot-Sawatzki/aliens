let i: number;
namespace SpriteKind {
    export const Human_made = SpriteKind.create()
    export const Buiding_1 = SpriteKind.create()
    export const Building_2 = SpriteKind.create()
    export const Building_3 = SpriteKind.create()
}

let shot = 0
info.setLife(3)
info.setScore(0)
controller.A.onEvent(ControllerButtonEvent.Pressed, function on_event_pressed() {
    let projectile: Sprite;
    
    if (gun_timer == 0) {
        projectile = sprites.createProjectileFromSprite(img`
        . 7 .
        7 . .
        . 7 .
        . . 7
        . 7 .
         `, my_sprite, 0, -100)
        projectile.setKind(SpriteKind.Human_made)
        gun_timer = 1
    }
    
})
sprites.onOverlap(SpriteKind.Human_made, SpriteKind.Enemy, function on_overlap(sprite: Sprite, otherSprite: Sprite) {
    
    popper = 0
    for (let i = 0; i < 7; i++) {
        if (projectile.overlapsWith(list2[popper])) {
            
        }
        
    }
    otherSprite.setImage(img`
        ........................
        ........................
        ........................
        ........................
        ........................
        ........................
        ......1..1....1..1......
        .......1..1..1..1.......
        ........1......1........
        ........................
        ......111......111......
        ........................
        ........1......1........
        .......1..1..1..1.......
        ......1..1....1..1......
        ........................
        ........................
        ........................
        ........................
        ........................
        ........................
        ........................
        ........................
        ........................
    `)
    info.changeScoreBy(100)
    timer.after(500, function on_after() {
        sprites.destroy(otherSprite)
        timer.after(500, function on_after2() {
            if (shot == 6) {
                game.gameOver(true)
            }
            
        })
    })
    sprites.destroy(sprite)
})
sprites.onDestroyed(SpriteKind.Enemy, function on_on_destroyed(sprite: Sprite): number {
    
    
    shot += 1
    thingymabob = list2.length
    console.log(thingymabob)
    console.log(shot)
    return shot
})
sprites.onDestroyed(SpriteKind.Human_made, function on_destroyed(sprite: Sprite): number {
    
    gun_timer = 0
    return gun_timer
})
let projectile : Sprite = null
let my_sprite : Sprite = null
let index = 0
let popper = 0
let gun_timer = 0
let enemy_shot = 0
let checker = 0
let thingymabob = 0
let velocity = 0
shot = 0
let checker2 = 0
let b1_d = 0
let b2_d = 0
let b3_d = 0
let list2 = [sprites.create(img`
    ........................
    ........................
    ........................
    ........................
    ........................
    ...........11...........
    ..........1111..........
    .........111111.........
    ........11.11.11........
    ........11111111........
    ........11111111........
    ..........1..1..........
    .........1.11.1.........
    ........1.1..1.1........
    ........................
    ........................
    ........................
    ........................
    ........................
    ........................
    ........................
    ........................
    ........................
    ........................
`, SpriteKind.Enemy), sprites.create(img`
            ........................
            ........................
            ........................
            ........................
            ........................
            ...........11...........
            ..........1111..........
            .........111111.........
            ........11.11.11........
            ........11111111........
            ........11111111........
            ..........1..1..........
            .........1.11.1.........
            ........1.1..1.1........
            ........................
            ........................
            ........................
            ........................
            ........................
            ........................
            ........................
            ........................
            ........................
            ........................
`, SpriteKind.Enemy), sprites.create(img`
    ........................
    ........................
    ........................
    ........................
    ........................
    ...........11...........
    ..........1111..........
    .........111111.........
    ........11.11.11........
    ........11111111........
    ........11111111........
    ..........1..1..........
    .........1.11.1.........
    ........1.1..1.1........
    ........................
    ........................
    ........................
    ........................
    ........................
    ........................
    ........................
    ........................
    ........................
    ........................
`, SpriteKind.Enemy), sprites.create(img`
    ........................
    ........................
    ........................
    ........................
    ........................
    ...........11...........
    ..........1111..........
    .........111111.........
    ........11.11.11........
    ........11111111........
    ........11111111........
    ..........1..1..........
    .........1.11.1.........
    ........1.1..1.1........
    ........................
    ........................
    ........................
    ........................
    ........................
    ........................
    ........................
    ........................
    ........................
    ........................
`, SpriteKind.Enemy), sprites.create(img`
    ........................
    ........................
    ........................
    ........................
    ........................
    ...........11...........
    ..........1111..........
    .........111111.........
    ........11.11.11........
    ........11111111........
    ........11111111........
    ..........1..1..........
    .........1.11.1.........
    ........1.1..1.1........
    ........................
    ........................
    ........................
    ........................
    ........................
    ........................
    ........................
    ........................
    ........................
    ........................
`, SpriteKind.Enemy), sprites.create(img`
    ........................
    ........................
    ........................
    ........................
    ........................
    ...........11...........
    ..........1111..........
    .........111111.........
    ........11.11.11........
    ........11111111........
    ........11111111........
    ..........1..1..........
    .........1.11.1.........
    ........1.1..1.1........
    ........................
    ........................
    ........................
    ........................
    ........................
    ........................
    ........................
    ........................
    ........................
    ........................
`, SpriteKind.Enemy)]
list2[0].setPosition(15, 20)
list2[1].setPosition(30, 20)
list2[2].setPosition(45, 20)
list2[3].setPosition(60, 20)
list2[4].setPosition(75, 20)
list2[5].setPosition(90, 20)
index = 0
for (i = 0; i < 6; i++) {
    
    list2[velocity].setVelocity(5, 0)
    velocity = velocity + 1
    index += 1
}
my_sprite = sprites.create(img`
        . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . 7 7 . . . . . . . 
            . . . . . . 7 7 7 7 . . . . . . 
            . . 7 7 7 7 7 7 7 7 7 7 7 7 . . 
            . 7 7 7 7 7 7 7 7 7 7 7 7 7 7 . 
            . 7 7 7 7 7 7 7 7 7 7 7 7 7 7 . 
            . 7 7 7 7 7 7 7 7 7 7 7 7 7 7 . 
            . 7 7 7 7 7 7 7 7 7 7 7 7 7 7 . 
            . . . . . . . . . . . . . . . .
    `, SpriteKind.Player)
my_sprite.setPosition(80, 110)
my_sprite.setStayInScreen(true)
controller.moveSprite(my_sprite, 50, 0)
let tower_1 = sprites.create(img`
    .........................
    .........................
    ....77777777777777777....
    ...7777777777777777777...
    ..777777777777777777777..
    .77777777777777777777777.
    .77777777.......77777777.
    .7777777.........7777777.
    .7777777.........7777777.
    .777777...........777777.
    .777777...........777777.
    .777777...........777777.
    .........................
    .........................
    .........................
    .........................
`, SpriteKind.Buiding_1)
tower_1.setPosition(35, 100)
let tower_2 = sprites.create(img`
        .........................
            .........................
            ....77777777777777777....
            ...7777777777777777777...
            ..777777777777777777777..
            .77777777777777777777777.
            .77777777.......77777777.
            .7777777.........7777777.
            .7777777.........7777777.
            .777777...........777777.
            .777777...........777777.
            .777777...........777777.
            .........................
            .........................
            .........................
            .........................
    `, SpriteKind.Building_2)
tower_2.setPosition(80, 100)
let tower_3 = sprites.create(img`
        .........................
            .........................
            ....77777777777777777....
            ...7777777777777777777...
            ..777777777777777777777..
            .77777777777777777777777.
            .77777777.......77777777.
            .7777777.........7777777.
            .7777777.........7777777.
            .777777...........777777.
            .777777...........777777.
            .777777...........777777.
            .........................
            .........................
            .........................
            .........................
    `, SpriteKind.Building_3)
tower_3.setPosition(125, 100)
game.onUpdate(function on_on_update() {
    let i: number;
    
    checker = 0
    for (i = 0; i < 6; i++) {
        if (list2[checker].x > 150 || list2[checker].x < 10) {
            timer.throttle("action", 500, function on_throttle() {
                let changer = 0
                for (let i = 0; i < 6; i++) {
                    list2[changer].setVelocity(list2[changer].vx * -1, 0)
                    list2[changer].setPosition(list2[changer].x, list2[changer].y + 6)
                    changer = changer + 1
                }
            })
        }
        
        checker = checker + 1
    }
})
